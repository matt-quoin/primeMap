
<div id="sliderdiv">
  <input id="date_slider" type="range" min="1975" max="2013" step="0.01" value="1975"/>
</div>
<script>
  var initialize = true;
  var dataServerPath = "{{MEDIA_URL}}media_files/{{media.slug}}/";
  buildMap(dataServerPath);

  if(initialize){
    csvParse(dataServerPath, updateMap, 1975, 0);
    updateYear(1975);
    initialize = false; //makes countries clickable from the start
  }

  d3.select("#date_slider").on("input", function(){ //updates year in right corner
    var value = Math.round(this.value);
    updateYear(value);
  });

  d3.select("#date_slider").on("mouseup", function(){ //updates actual map
    var value = Math.round(this.value);
    csvParse(dataServerPath, updateMap, value, 0);
  });
  $( window ).resize(function() {
    window.location.reload();
  });
</script>
